meta:
  environment: node
  toolchain:
    name: webpack
    version: 0

build:
  dockerfile: Dockerfile

run:
  containerPort: 3000

  # Переменные окружения
  envs:
    NODE_ENV: production
    FFMPEG_PATH: /usr/bin/ffmpeg
  
  # Healthcheck для проверки работоспособности
  healthcheck:
    path: /
    timeout: 10
    interval: 30
    startPeriod: 60
    retries: 3
  
  # Персистентное хранилище
  persistentStorage:
    - name: dedmoroz-data
      mountPath: /app

# Ресурсы
resources:
  memory: 512
  cpu: 0.5

